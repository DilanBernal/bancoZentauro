<loader></loader>

<div class="errorVisual" *ngIf="huboError" [class.salida]="!mostrarError">
  <svg class="crossmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
    <circle class="crossmark__circle" cx="26" cy="26" r="25" fill="none" />
    <path
      class="crossmark__cross"
      fill="none"
      d="M16 16 l20 20 M16 36 l20 -20"
    />
  </svg>
  <h2>{{ 'error.huboError' | translate }}</h2>
  <br />
  <p #errorHtml>{{ errorMessage }}</p>
</div>

<form [formGroup]="fileForm" (ngSubmit)="onSubmit()" novalidate>
  <h2>{{ 'producto.crearNuevo' | translate }}</h2>
  
  <div class="input-group">
    <label for="nombre">{{ 'producto.nombre' | translate }}</label>
    <input
      class="form-control"
      type="text"
      id="nombre"
      formControlName="nombre"
      placeholder="{{ 'producto.nombrePlaceholder' | translate }}"
      required
    />
  </div>
  <span
    *ngIf="fileForm.get('nombre')?.hasError('required') && fileForm.get('nombre')?.touched"
    class="error"
  >
    {{ 'producto.nombreRequerido' | translate }}
  </span>

  <div class="input-group input-description">
    <label for="descripcion">{{ 'producto.descripcion' | translate }}</label>
    <textarea
      class="form-control"
      type="textarea"
      id="descripcion"
      minlength="25"
      formControlName="descripcion"
      placeholder="{{ 'producto.descripcionPlaceholder' | translate }}"
      required
    ></textarea>
  </div>

  <span
    *ngIf="fileForm.get('descripcion')?.hasError('required') && fileForm.get('descripcion')?.touched"
    class="error"
  >
    {{ 'producto.descripcionRequerida' | translate }}
  </span>

  <span
    *ngIf="fileForm.get('descripcion')?.value < 25 && fileForm.get('descripcion')?.touched"
    class="error"
  >
    {{ 'producto.descripcionMinima' | translate }}
  </span>

  <div class="input-group">
    <div class="selection-input">
      <label for="tipo">{{ 'producto.tipo' | translate }}</label>
      <select id="tipo" formControlName="tipo" class="form-select" required>
        <option value="" disabled selected>{{ 'producto.tipoPlaceholder' | translate }}</option>
        <option value="credito">{{ 'producto.tipoCredito' | translate }}</option>
        <option value="debito">{{ 'producto.tipoDebito' | translate }}</option>
        <option value="prepagada">{{ 'producto.tipoPrepagada' | translate }}</option>
      </select>
    </div>
    <span
      *ngIf="fileForm.get('tipo')?.hasError('required') && fileForm.get('tipo')?.touched"
      class="error"
    >
      {{ 'producto.tipoRequerido' | translate }}
    </span>
  </div>

  <div class="input-group">
    <label for="imagen">{{ 'producto.imagen' | translate }}</label>
    <input
      class="form-control"
      type="file"
      id="imagen"
      (change)="onFileChange($event)"
      accept=".png"
      required
    />
    <span *ngIf="fileError" class="error">{{ fileError }}</span>
  </div>
  <br />

  <div class="submit-btn">
    <button class="btn btnVerde" type="submit" [disabled]="!fileForm.valid">
      {{ 'producto.crear' | translate }}
    </button>
  </div>
</form>

<button class="btn btnVerde btnVolver">{{ 'producto.volver' | translate }}</button>
